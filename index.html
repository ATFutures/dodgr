<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distances on Directed Graphs • dodgr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Distances on Directed Graphs">
<meta property="og:description" content="Distances on dual-weighted directed graphs using priority-queue
    shortest paths (Padgham (2019) &lt;doi:10.32866/6945&gt;). Weighted directed
    graphs have weights from A to B which may differ from those from B to A.
    Dual-weighted directed graphs have two sets of such weights. A canonical
    example is a street network to be used for routing in which routes are
    calculated by weighting distances according to the type of way and mode of
    transport, yet lengths of routes must be calculated from direct distances.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dodgr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/index.html">Vignettes</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ATFutures/dodgr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="dodgr-distances-on-directed-graphs-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dodgr-distances-on-directed-graphs-in-r" class="anchor"></a>dodgr: Distances on Directed Graphs in R</h1></div>
<p>R package for calculating pairwise distances on dual-weighted directed graphs using Priority Queue Shortest Paths. Dual-weighted directed graphs are directed graphs with two sets of weights so that <code>weight1(A-&gt;B) != weight1(B-&gt;A)</code>—the directed property—and <code>weight2(A-&gt;B) != weight1(A-&gt;B)</code>—the dual property. <code>dodgr</code> calculates shortest paths according to one weight, while distances along paths are calculating using the other weight. A canonical example of a dual-weighted directed graph is a street network to be used for routing. Routes are usually calculated by weighting different kinds of streets or ways according to a particular mode of transport, while the desired output is a direct, unweighted distance.</p>
<p>But wait, there’s more … <code>dodgr</code> can also aggregate flows throughout a network through specifying origins, destinations, and flow densities. Or even apply a network dispersal model from a set of origin points only.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install <code>dodgr</code> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"dodgr"</span>) <span class="co"># current CRAN version</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"ATFutures/dodgr"</span>) <span class="co"># Development version</span></a></code></pre></div>
<p>Then load with</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span> (dodgr)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The primary functions are,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">d &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_dists.html">dodgr_dists</a></span> (<span class="dt">graph =</span> graph, <span class="dt">from =</span> pts, <span class="dt">to =</span> pts)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">flows &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/array">array</a></span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span> (pts) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>), <span class="dt">dim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span> (pts, <span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">f &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_flows_aggregate.html">dodgr_flows_aggregate</a></span> (<span class="dt">graph =</span> graph, <span class="dt">from =</span> pts, <span class="dt">to =</span> pts, <span class="dt">flows =</span> flows)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">f &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_flows_disperse.html">dodgr_flows_disperse</a></span> (<span class="dt">graph =</span> graph, <span class="dt">from =</span> pts, <span class="dt">to =</span> pts,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                           <span class="dt">dens =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span> (pts)))</a></code></pre></div>
<p>The first function, <code><a href="reference/dodgr_dists.html">dodgr_dists()</a></code>, produces a square matrix of distances between all points listed in <code>pts</code> and routed along the dual-weighted directed network given in <code>graph</code>. An even simpler usage allows calculation of pair-wise distances between a set of geographical coordinates (here, for a sizey chunk of New York City):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">xlim &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span> (<span class="op">-</span><span class="fl">74.12931</span>, <span class="fl">-73.99214</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">ylim &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span> (<span class="fl">40.70347</span>, <span class="fl">40.75354</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">npts &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">pts &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span> (<span class="dt">x =</span> xlim [<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span> (npts) <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/diff">diff</a></span> (xlim),</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">                   <span class="dt">y =</span> ylim [<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span> (npts) <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/diff">diff</a></span> (ylim))</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span> (</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">             d &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_dists.html">dodgr_dists</a></span> (<span class="dt">from =</span> pts)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;    user  system elapsed</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 107.530   0.602  19.418</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span> (d, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; [1]  0.00000 21.68109</span></a></code></pre></div>
<p>This will automatically download the street network (using <a href="https://cran.r-project.org/package=osmdata"><code>osmdata</code></a>), and even then calculating distances between 1,000 points – that’s 1,000,000 pairwise distances! – can be done in around 20 seconds.</p>
<p>The second function, <code><a href="reference/dodgr_flows_aggregate.html">dodgr_flows_aggregate()</a></code>, aggregates the densities specified in the matrix <code>flows</code> between all pairs of <code>from</code> and <code>to</code> points, and returns a modified version of the input network with an additional column containing aggregated flows (see below). The equivalent function, <code><a href="reference/dodgr_flows_disperse.html">dodgr_flows_disperse()</a></code>, does an equivalent thing for network dispersal models from known points of origin.</p>
<div id="the-dodgr-graph-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#the-dodgr-graph-structure" class="anchor"></a>The <code>dodgr</code> graph structure</h3>
<p>A graph or network in <code>dodgr</code> is represented as a flat table (<code>data.frame</code>, <code>tibble</code>, <code>data.table</code>, whatever) of minimally four columns: <code>from</code>, <code>to</code>, <code>weight</code>, and <code>distance</code>. The first two can be of arbitrary form (<code>numeric</code> or <code>character</code>); <code>weight</code> is used to evaluate the shortest paths, and the desired distances are evaluated by summing the values of <code>distance</code> along those paths. For a street network example, <code>weight</code> will generally be the actual distance multiplied by a priority weighting for a given mode of transport and type of way, while <code>distance</code> will be the pysical distance.</p>
<p><code>dodgr</code> includes the conversion functions:</p>
<ol style="list-style-type: decimal">
<li>
<code>dodgr_to_sfc</code> to convert spatial <code>dodgr</code> graphs into Simple Features format used by the <a href="https://cran.r-project.org/package=sf"><code>sf</code> package</a>.</li>
<li>
<code>dodgr_to_igraph</code> to convert (not necessarily spatial) <code>dodgr</code> graphs into <a href="https://cran.r-project.org/package=igraph"><code>igraph</code></a> format; and</li>
<li>
<code>dodgr_to_tidygraph</code> to convert (not necessarily spatial) <code>dodgr</code> graphs into <a href="https://cran.r-project.org/package=tidygraph"><code>tidygraph</code></a> format.</li>
</ol>
</div>
<div id="further-detail" class="section level3">
<h3 class="hasAnchor">
<a href="#further-detail" class="anchor"></a>Further detail</h3>
<p>For more detail, see the <a href="https://atfutures.github.io/dodgr/articles/dodgr.html">main package vignette</a>, along with a second vignette detailing <a href="https://atfutures.github.io/dodgr/articles/benchmark.html">benchmark timings</a>, showing that under many circumstances, <code>dodgr</code> performs considerably faster than equivalent routines from the <code>igraph</code> package.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dodgr">https://​cloud.r-project.org/​package=dodgr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ATFutures/dodgr">https://​github.com/​ATFutures/​dodgr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ATFutures/dodgr/issues">https://​github.com/​ATFutures/​dodgr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing dodgr</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mark Padgham <br><small class="roles"> Author, maintainer </small>  </li>
<li>Andreas Petutschnig <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ATFutures/dodgr"><img src="https://travis-ci.org/ATFutures/dodgr.svg" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/ATFutures/dodgr"><img src="https://ci.appveyor.com/api/projects/status/github/ATFutures/dodgr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/gh/ATFutures/dodgr"><img src="https://codecov.io/gh/ATFutures/dodgr/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active"></a></li>
<li><a href="https://cran.r-project.org/package=dodgr"><img src="http://www.r-pkg.org/badges/version/dodgr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=dodgr"><img src="http://cranlogs.r-pkg.org/badges/grand-total/dodgr?color=orange" alt="CRAN Downloads"></a></li>
<li><a href="https://bestpractices.coreinfrastructure.org/projects/1396"><img src="https://bestpractices.coreinfrastructure.org/projects/1396/badge" alt="CII Best Practices"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Mark Padgham, Andreas Petutschnig.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
