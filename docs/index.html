<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distances on Directed Graphs • dodgr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Distances on Directed Graphs">
<meta property="og:description" content="Distances on dual-weighted directed graphs using priority-queue
    shortest paths. Weighted directed graphs have weights from A to B which may
    differ from those from B to A. Dual-weighted directed graphs have two sets
    of such weights. A canonical example is a street network to be used for
    routing in which routes are calculated by weighting distances according to
    the type of way and mode of transport, yet lengths of routes must be
    calculated from direct distances.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dodgr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1.99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="articles/index.html">Vignettes</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ATFutures/dodgr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="dodgr-distances-on-directed-graphs-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dodgr-distances-on-directed-graphs-in-r" class="anchor"></a>dodgr: Distances on Directed Graphs in R</h1></div>
<p>R package for calculating pairwise distances on dual-weighted directed graphs using Priority Queue Shortest Paths. Dual-weighted directed graphs are directed graphs with two sets of weights so that <code>weight1(A-&gt;B) != weight1(B-&gt;A)</code>—the directed property—and <code>weight2(A-&gt;B) != weight1(A-&gt;B)</code>—the dual property. <code>dodgr</code> calculates shortest paths according to one weight, while distances along paths are calculating using the other weight. A canonical example of a dual-weighted directed graph is a street network to be used for routing. Routes are usually calculated by weighting different kinds of streets or ways according to a particular mode of transport, while the desired output is a direct, unweighted distance.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install <code>dodgr</code> from github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ATFutures/dodgr"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The primary function,</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">d &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_dists.html">dodgr_dists</a></span> (<span class="dt">graph =</span> graph, <span class="dt">from =</span> pts, <span class="dt">to =</span> pts)</a></code></pre></div>
<p>produces a square matrix of distances between all points listed in <code>pts</code> and routed along the dual-weighted directed network given in <code>graph</code>. An even simpler usage allows calculation of pair-wise distances between a set of geographical coordinates (here, for a sizey chunk of New York City):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">xlim &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="op">-</span><span class="fl">74.12931</span>, <span class="fl">-73.99214</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">ylim &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="fl">40.70347</span>, <span class="fl">40.75354</span>)</a>
<a class="sourceLine" id="cb3-3" title="3">npts &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb3-4" title="4">pts &lt;-<span class="st"> </span><span class="kw">data.frame</span> (<span class="dt">x =</span> xlim [<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="kw">runif</span> (npts) <span class="op">*</span><span class="st"> </span><span class="kw">diff</span> (xlim),</a>
<a class="sourceLine" id="cb3-5" title="5">                   <span class="dt">y =</span> ylim [<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="kw">runif</span> (npts) <span class="op">*</span><span class="st"> </span><span class="kw">diff</span> (ylim))</a>
<a class="sourceLine" id="cb3-6" title="6">st &lt;-<span class="st"> </span><span class="kw">Sys.time</span> ()</a>
<a class="sourceLine" id="cb3-7" title="7">d &lt;-<span class="st"> </span><span class="kw"><a href="reference/dodgr_dists.html">dodgr_dists</a></span> (<span class="dt">from =</span> pts)</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">Sys.time</span> () <span class="op">-</span><span class="st"> </span>st</a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; Time difference of 9.473597 secs</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="kw">range</span> (d, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; [1]  0.00000 16.64285</span></a></code></pre></div>
<p>This will automatically download the street network (using <a href="https://cran.r-project.org/package=osmdata"><code>osmdata</code></a>), and even then calculating distances between 1,000 points – that’s 1,000,000 pairwise distances! – can be done in around 10 seconds.</p>
<div id="other-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#other-functions" class="anchor"></a>Other Functions</h3>
<p>The other main functions of <code>dodgr</code> are <code>dodgr_paths</code>, to return the actual paths between pairs of vertices, and <code>dodgr_flows</code> to aggregate flows as routed throughout a network according to sets of start and end points (origins and destinations), and associated densities or numbers travelling between each of these.</p>
</div>
<div id="the-dodgr-graph-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#the-dodgr-graph-structure" class="anchor"></a>The <code>dodgr</code> graph structure</h3>
<p>A graph or network in <code>dodgr</code> is represented as a flat table (<code>data.frame</code>, <code>tibble</code>, <code>data.table</code>, whatever) of minimally four columns: <code>from</code>, <code>to</code>, <code>weight</code>, and <code>distance</code>. The first two can be of arbitrary form (<code>numeric</code> or <code>character</code>); <code>weight</code> is used to evaluate the shortest paths, and the desired distances are evaluated by summing the values of <code>distance</code> along those paths. For a street network example, <code>weight</code> will generally be the actual distance multiplied by a priority weighting for a given mode of transport and type of way, while <code>distance</code> will be the pysical distance.</p>
<p><code>dodgr</code> includes the conversion functions:</p>
<ol style="list-style-type: decimal">
<li>
<code>dodgr_to_sfc</code> to convert spatial <code>dodgr</code> graphs into Simple Features format used by the <a href="https://cran.r-project.org/package=sf"><code>sf</code> package</a>.</li>
<li>
<code>dodgr_to_igraph</code> to convert (not necessarily spatial) <code>dodgr</code> graphs into <a href="https://cran.r-project.org/package=igraph"><code>igraph</code></a> format (not yet implemented); and</li>
<li>
<code>dodgr_to_tidygraph</code> to convert (not necessarily spatial) <code>dodgr</code> graphs into <a href="https://cran.r-project.org/package=tidygraph"><code>tidygraph</code></a> format (not yet implemented).</li>
</ol>
</div>
<div id="further-detail" class="section level3">
<h3 class="hasAnchor">
<a href="#further-detail" class="anchor"></a>Further detail</h3>
<p>For more detail, see the <a href="https://atfutures.github.io/dodgr/articles/dodgr.html">main package vignette</a>, along with a second vignette detailing <a href="https://atfutures.github.io/dodgr/articles/benchmark.html">benchmark timings</a>, showing that under many circumstances, <code>dodgr</code> performs considerably faster than equivalent routines from the <code>igraph</code> package.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dodgr">https://​cloud.r-project.org/​package=dodgr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ATFutures/dodgr">https://​github.com/​ATFutures/​dodgr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ATFutures/dodgr/issues">https://​github.com/​ATFutures/​dodgr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing dodgr</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mark Padgham <br><small class="roles"> Author, maintainer </small>  </li>
<li>Andreas Petutschnig <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ATFutures/dodgr"><img src="https://travis-ci.org/ATFutures/dodgr.svg" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/ATFutures/dodgr"><img src="https://ci.appveyor.com/api/projects/status/github/ATFutures/dodgr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/gh/ATFutures/dodgr"><img src="https://codecov.io/gh/ATFutures/dodgr/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active"></a></li>
<li><a href="https://cran.r-project.org/package=dodgr"><img src="http://www.r-pkg.org/badges/version/dodgr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=dodgr"><img src="http://cranlogs.r-pkg.org/badges/grand-total/dodgr?color=orange" alt="CRAN Downloads"></a></li>
<li><a href="https://bestpractices.coreinfrastructure.org/projects/1396"><img src="https://bestpractices.coreinfrastructure.org/projects/1396/badge" alt="CII Best Practices"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Mark Padgham, Andreas Petutschnig.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
